{
  "version": 3,
  "sources": ["../src/DOMSanitizer.ts", "../src/NetworkedDOMWebsocket.ts", "../src/ElementUtils.ts", "../src/NetworkedDOMWebsocketV01Adapter.ts", "../src/NetworkedDOMWebsocketV02Adapter.ts"],
  "sourcesContent": ["export type DOMSanitizerOptions = {\n  tagPrefix?: string; // e.g. \"m-\" to restrict to only custom elements with a tag name starting with \"m-\"\n  replacementTagPrefix?: string; // e.g. \"x-\" to replace non-prefixed tags with a new prefix (e.g. \"div\" -> \"x-div\")\n};\n\nexport class DOMSanitizer {\n  static sanitise(node: HTMLElement, options: DOMSanitizerOptions = {}) {\n    if (node.getAttributeNames) {\n      for (const attr of node.getAttributeNames()) {\n        if (!DOMSanitizer.IsValidAttributeName(attr)) {\n          node.removeAttribute(attr);\n        }\n      }\n    }\n\n    if (node instanceof HTMLElement) {\n      if (options.tagPrefix) {\n        const tag = node.nodeName.toLowerCase();\n        if (!tag.startsWith(options.tagPrefix.toLowerCase())) {\n          node = DOMSanitizer.replaceNodeTagName(\n            node,\n            options.replacementTagPrefix ? options.replacementTagPrefix + tag : `x-${tag}`,\n          );\n        }\n      }\n    }\n\n    if (node.nodeName === \"SCRIPT\" || node.nodeName === \"OBJECT\" || node.nodeName === \"IFRAME\") {\n      // set contents to empty string\n      node.innerHTML = \"\";\n      DOMSanitizer.stripAllAttributes(node);\n    } else {\n      if (node.getAttributeNames) {\n        for (const attr of node.getAttributeNames()) {\n          if (!DOMSanitizer.shouldAcceptAttribute(attr)) {\n            node.removeAttribute(attr);\n          }\n        }\n      }\n      for (let i = 0; i < node.childNodes.length; i++) {\n        DOMSanitizer.sanitise(node.childNodes[i] as HTMLElement, options);\n      }\n    }\n    return node;\n  }\n\n  static replaceNodeTagName(node: HTMLElement, newTagName: string) {\n    const replacementNode = document.createElement(newTagName);\n    let index;\n    while (node.firstChild) {\n      replacementNode.appendChild(node.firstChild);\n    }\n    for (index = node.attributes.length - 1; index >= 0; --index) {\n      replacementNode.setAttribute(node.attributes[index].name, node.attributes[index].value);\n    }\n    node.parentNode?.replaceChild(replacementNode, node);\n    return replacementNode;\n  }\n\n  static stripAllAttributes(node: HTMLElement) {\n    if (node.getAttributeNames) {\n      for (const attr of node.getAttributeNames()) {\n        node.removeAttribute(attr);\n      }\n    }\n  }\n\n  static IsASCIIDigit(c: string): boolean {\n    return c >= \"0\" && c <= \"9\";\n  }\n\n  static IsASCIIAlpha(c: string) {\n    return (c >= \"a\" && c <= \"z\") || (c >= \"A\" && c <= \"Z\");\n  }\n\n  static IsValidAttributeName(characters: string): boolean {\n    const c = characters[0];\n    if (!(DOMSanitizer.IsASCIIAlpha(c) || c === \":\" || c === \"_\")) {\n      return false;\n    }\n\n    for (let i = 1; i < characters.length; i++) {\n      const c = characters[i];\n      if (\n        !(\n          DOMSanitizer.IsASCIIDigit(c) ||\n          DOMSanitizer.IsASCIIAlpha(c) ||\n          c === \":\" ||\n          c === \"_\" ||\n          c === \"-\" ||\n          c === \".\"\n        )\n      ) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  static shouldAcceptAttribute(attribute: string) {\n    if (!DOMSanitizer.IsValidAttributeName(attribute)) {\n      console.warn(\"Invalid attribute name\", attribute);\n      return false;\n    }\n\n    // TODO - this might be overly restrictive - apologies to someone that finds this because you have a non-event attribute filtered by this\n    return !attribute.startsWith(\"on\");\n  }\n}\n", "import {\n  isNetworkedDOMProtocolSubProtocol_v0_2,\n  networkedDOMProtocolSubProtocol_v0_1,\n  networkedDOMProtocolSubProtocol_v0_2_SubVersionsList,\n} from \"@mml-io/networked-dom-protocol\";\n\nimport { NetworkedDOMWebsocketV01Adapter } from \"./NetworkedDOMWebsocketV01Adapter\";\nimport { NetworkedDOMWebsocketV02Adapter } from \"./NetworkedDOMWebsocketV02Adapter\";\n\nconst startingBackoffTimeMilliseconds = 100;\nconst maximumBackoffTimeMilliseconds = 10000;\nconst maximumWebsocketConnectionTimeout = 5000;\n\nexport type NetworkedDOMWebsocketFactory = (url: string) => WebSocket;\n\nexport enum NetworkedDOMWebsocketStatus {\n  Connecting,\n  ConnectionOpen, // The websocket is open and connected, but no messages have been received yet\n  Connected, // The websocket is open and connected, and messages are being received\n  Reconnecting,\n  Disconnected,\n}\n\nexport function NetworkedDOMWebsocketStatusToString(status: NetworkedDOMWebsocketStatus): string {\n  switch (status) {\n    case NetworkedDOMWebsocketStatus.Connecting:\n      return \"Connecting...\";\n    case NetworkedDOMWebsocketStatus.ConnectionOpen:\n      return \"Connection Open\";\n    case NetworkedDOMWebsocketStatus.Connected:\n      return \"Connected\";\n    case NetworkedDOMWebsocketStatus.Reconnecting:\n      return \"Reconnecting...\";\n    case NetworkedDOMWebsocketStatus.Disconnected:\n      return \"Disconnected\";\n    default:\n      return \"Unknown\";\n  }\n}\n\nexport type NetworkedDOMWebsocketOptions = {\n  tagPrefix?: string; // e.g. \"m-\" to restrict to only custom elements with a tag name starting with \"m-\"\n  replacementTagPrefix?: string; // e.g. \"x-\" to replace non-prefixed tags with a new prefix (e.g. \"div\" -> \"x-div\")\n  allowSVGElements?: boolean; // Whether to allow SVG namespace elements to be created. Default is false.\n  connectionToken?: string | null; // Optional token to send to the server for authentication/authorization\n};\n\nexport type NetworkedDOMWebsocketAdapter = {\n  receiveMessage: (message: MessageEvent) => void;\n  handleEvent: (element: HTMLElement, event: CustomEvent<{ element: HTMLElement }>) => void;\n  clearContents: () => boolean;\n};\n\n/**\n * NetworkedDOMWebsocket is a client for a NetworkedDOMServer. It connects to a server on the provided url and receives\n * updates to the DOM. It also sends events to the server for interactions with the DOM.\n *\n * The NetworkedDOMWebsocket is attached to a parentElement and synchronizes the received DOM under that element.\n */\nexport class NetworkedDOMWebsocket {\n  private websocket: WebSocket | null = null;\n  private websocketAdapter: NetworkedDOMWebsocketAdapter | null = null;\n\n  private stopped = false;\n  private backoffTime = startingBackoffTimeMilliseconds;\n  private status: NetworkedDOMWebsocketStatus | null = null;\n\n  public static createWebSocket(url: string): WebSocket {\n    return new WebSocket(url, [\n      ...networkedDOMProtocolSubProtocol_v0_2_SubVersionsList,\n      networkedDOMProtocolSubProtocol_v0_1,\n    ]);\n  }\n\n  constructor(\n    private url: string,\n    private websocketFactory: NetworkedDOMWebsocketFactory,\n    private parentElement: HTMLElement,\n    private timeCallback?: (time: number) => void,\n    private statusUpdateCallback?: (status: NetworkedDOMWebsocketStatus) => void,\n    private options: NetworkedDOMWebsocketOptions = {},\n  ) {\n    this.setStatus(NetworkedDOMWebsocketStatus.Connecting);\n    this.startWebSocketConnectionAttempt();\n  }\n\n  private setStatus(status: NetworkedDOMWebsocketStatus) {\n    if (this.status !== status) {\n      this.status = status;\n      if (this.statusUpdateCallback) {\n        this.statusUpdateCallback(status);\n      }\n    }\n  }\n\n  private createWebsocketWithTimeout(timeout: number): Promise<WebSocket> {\n    return new Promise((resolve, reject) => {\n      const websocket = this.websocketFactory(this.url);\n      const timeoutId = setTimeout(() => {\n        reject(new Error(\"websocket connection timed out\"));\n        websocket.close();\n      }, timeout);\n      websocket.binaryType = \"arraybuffer\";\n      websocket.addEventListener(\"open\", () => {\n        clearTimeout(timeoutId);\n\n        this.websocket = websocket;\n        const isV02 = isNetworkedDOMProtocolSubProtocol_v0_2(websocket.protocol);\n        let websocketAdapter: NetworkedDOMWebsocketAdapter;\n        if (isV02) {\n          websocketAdapter = new NetworkedDOMWebsocketV02Adapter(\n            websocket,\n            this.parentElement,\n            () => {\n              this.backoffTime = startingBackoffTimeMilliseconds;\n              this.setStatus(NetworkedDOMWebsocketStatus.Connected);\n            },\n            this.timeCallback,\n            this.options,\n          );\n        } else {\n          websocketAdapter = new NetworkedDOMWebsocketV01Adapter(\n            websocket,\n            this.parentElement,\n            () => {\n              this.backoffTime = startingBackoffTimeMilliseconds;\n              this.setStatus(NetworkedDOMWebsocketStatus.Connected);\n            },\n            this.timeCallback,\n            this.options,\n          );\n        }\n        this.websocketAdapter = websocketAdapter;\n\n        websocket.addEventListener(\"message\", (event) => {\n          if (websocket !== this.websocket) {\n            console.log(\"Ignoring websocket message event because it is no longer current\");\n            websocket.close();\n            return;\n          }\n          websocketAdapter.receiveMessage(event);\n        });\n\n        const onWebsocketClose = async () => {\n          let hadContents = false;\n          if (this.websocketAdapter) {\n            hadContents = this.websocketAdapter.clearContents();\n          }\n          if (this.stopped) {\n            // This closing is expected. The client closed the websocket.\n            this.setStatus(NetworkedDOMWebsocketStatus.Disconnected);\n            return;\n          }\n          if (!hadContents) {\n            // The websocket did not deliver any contents. It may have been successfully opened, but immediately closed. This client should back off to prevent this happening in a rapid loop.\n            await this.waitBackoffTime();\n          }\n          // The websocket closed unexpectedly. Try to reconnect.\n          this.setStatus(NetworkedDOMWebsocketStatus.Reconnecting);\n          this.startWebSocketConnectionAttempt();\n        };\n\n        websocket.addEventListener(\"close\", () => {\n          if (websocket !== this.websocket) {\n            console.warn(\"Ignoring websocket close event because it is no longer current\");\n            return;\n          }\n          onWebsocketClose();\n        });\n        websocket.addEventListener(\"error\", (e) => {\n          if (websocket !== this.websocket) {\n            console.log(\"Ignoring websocket error event because it is no longer current\");\n            return;\n          }\n          console.error(\"NetworkedDOMWebsocket error\", e);\n          onWebsocketClose();\n        });\n\n        this.setStatus(NetworkedDOMWebsocketStatus.ConnectionOpen);\n        resolve(websocket);\n      });\n      websocket.addEventListener(\"error\", (e) => {\n        clearTimeout(timeoutId);\n        reject(e);\n      });\n    });\n  }\n\n  private async waitBackoffTime(): Promise<void> {\n    console.warn(`Websocket connection to '${this.url}' failed: retrying in ${this.backoffTime}ms`);\n    await new Promise((resolve) => setTimeout(resolve, this.backoffTime));\n    this.backoffTime = Math.min(\n      // Introduce a small amount of randomness to prevent clients from retrying in lockstep\n      this.backoffTime * (1.5 + Math.random() * 0.5),\n      maximumBackoffTimeMilliseconds,\n    );\n  }\n\n  private async startWebSocketConnectionAttempt() {\n    if (this.stopped) {\n      return;\n    }\n    while (true) {\n      if (this.stopped) {\n        return;\n      }\n      try {\n        await this.createWebsocketWithTimeout(maximumWebsocketConnectionTimeout);\n        break;\n      } catch (e) {\n        console.error(\"Websocket connection failed\", e);\n        // Connection failed, retry with backoff\n        this.setStatus(NetworkedDOMWebsocketStatus.Reconnecting);\n        await this.waitBackoffTime();\n      }\n    }\n  }\n\n  public stop() {\n    this.stopped = true;\n    if (this.websocket !== null) {\n      this.websocket.close();\n      this.websocket = null;\n    }\n  }\n\n  public handleEvent(element: HTMLElement, event: CustomEvent<{ element: HTMLElement }>) {\n    if (this.websocketAdapter) {\n      this.websocketAdapter.handleEvent(element, event);\n    }\n  }\n}\n\nexport function isHTMLElement(node: unknown, rootNode: HTMLElement): node is HTMLElement {\n  if (node instanceof HTMLElement || node instanceof Element) {\n    return true;\n  }\n  if (!rootNode.ownerDocument.defaultView) {\n    return false;\n  }\n  return node instanceof rootNode.ownerDocument.defaultView.HTMLElement;\n}\n\nexport function isText(node: unknown, rootNode: HTMLElement): node is Text {\n  if (node instanceof Text) {\n    return true;\n  }\n  if (!rootNode.ownerDocument.defaultView) {\n    return false;\n  }\n  return node instanceof rootNode.ownerDocument.defaultView.Text;\n}\n", "import { DOMSanitizer } from \"./DOMSanitizer\";\nimport { NetworkedDOMWebsocketOptions } from \"./NetworkedDOMWebsocket\";\n\n// These tags are always disallowed because they allow arbitrary HTML to be injected\nconst ALWAYS_DISALLOWED_TAGS = new Set([\"foreignobject\", \"iframe\", \"script\"]);\n\nconst SVG_TAG_NAMES_ADJUSTMENT_MAP = new Map(\n  [\n    \"svg\",\n    \"defs\",\n    \"g\",\n    \"text\",\n    \"filter\",\n    \"stop\",\n    \"path\",\n    \"rect\",\n    \"line\",\n    \"circle\",\n    \"animate\",\n    \"altGlyph\",\n    \"altGlyphDef\",\n    \"altGlyphItem\",\n    \"animateColor\",\n    \"animateMotion\",\n    \"animateTransform\",\n    \"clipPath\",\n    \"feBlend\",\n    \"feDropShadow\",\n    \"feColorMatrix\",\n    \"feComponentTransfer\",\n    \"feComposite\",\n    \"feConvolveMatrix\",\n    \"feDiffuseLighting\",\n    \"feDisplacementMap\",\n    \"feDistantLight\",\n    \"feFlood\",\n    \"feFuncA\",\n    \"feFuncB\",\n    \"feFuncG\",\n    \"feFuncR\",\n    \"feGaussianBlur\",\n    \"feImage\",\n    \"feMerge\",\n    \"feMergeNode\",\n    \"feMorphology\",\n    \"feOffset\",\n    \"fePointLight\",\n    \"feSpecularLighting\",\n    \"feSpotLight\",\n    \"feTile\",\n    \"feTurbulence\",\n    \"glyphRef\",\n    \"linearGradient\",\n    \"radialGradient\",\n    \"textPath\",\n    // `foreignObject` is explicitly disallowed because it allows injecting arbitrary HTML\n    // \"foreignObject\",\n  ].map((tn) => [tn.toLowerCase(), tn]),\n);\n\nconst SVG_ATTRS_ADJUSTMENT_MAP = new Map(\n  [\n    \"attributeName\",\n    \"attributeType\",\n    \"baseFrequency\",\n    \"baseProfile\",\n    \"calcMode\",\n    \"clipPathUnits\",\n    \"diffuseConstant\",\n    \"edgeMode\",\n    \"filterUnits\",\n    \"glyphRef\",\n    \"gradientTransform\",\n    \"gradientUnits\",\n    \"kernelMatrix\",\n    \"kernelUnitLength\",\n    \"keyPoints\",\n    \"keySplines\",\n    \"keyTimes\",\n    \"lengthAdjust\",\n    \"limitingConeAngle\",\n    \"markerHeight\",\n    \"markerUnits\",\n    \"markerWidth\",\n    \"maskContentUnits\",\n    \"maskUnits\",\n    \"numOctaves\",\n    \"pathLength\",\n    \"patternContentUnits\",\n    \"patternTransform\",\n    \"patternUnits\",\n    \"pointsAtX\",\n    \"pointsAtY\",\n    \"pointsAtZ\",\n    \"preserveAlpha\",\n    \"preserveAspectRatio\",\n    \"primitiveUnits\",\n    \"refX\",\n    \"refY\",\n    \"repeatCount\",\n    \"repeatDur\",\n    \"requiredExtensions\",\n    \"requiredFeatures\",\n    \"specularConstant\",\n    \"specularExponent\",\n    \"spreadMethod\",\n    \"startOffset\",\n    \"stdDeviation\",\n    \"stitchTiles\",\n    \"surfaceScale\",\n    \"systemLanguage\",\n    \"tableValues\",\n    \"targetX\",\n    \"targetY\",\n    \"textLength\",\n    \"viewBox\",\n    \"viewTarget\",\n    \"xChannelSelector\",\n    \"yChannelSelector\",\n    \"zoomAndPan\",\n  ].map((attr) => [attr.toLowerCase(), attr]),\n);\n\n/**\n * Remaps attribute names to their proper case for SVG elements\n */\nexport function remapAttributeName(attrName: string): string {\n  const remapped = SVG_ATTRS_ADJUSTMENT_MAP.get(attrName.toLowerCase());\n  if (remapped) {\n    return remapped;\n  }\n  return attrName;\n}\n\n/**\n * Creates an HTML Element (and optionally SVG Elements) with proper namespace handling\n */\nexport function createElementWithSVGSupport(\n  tag: string,\n  options: NetworkedDOMWebsocketOptions = {},\n): Element {\n  let filteredTag = tag.toLowerCase();\n\n  if (ALWAYS_DISALLOWED_TAGS.has(filteredTag.toLowerCase())) {\n    console.error(\"Disallowing tag\", filteredTag);\n    filteredTag = options.replacementTagPrefix ? options.replacementTagPrefix + tag : `x-${tag}`;\n  }\n\n  let svgTagMapping;\n  if (options.allowSVGElements) {\n    svgTagMapping = SVG_TAG_NAMES_ADJUSTMENT_MAP.get(filteredTag);\n  }\n\n  if (svgTagMapping) {\n    filteredTag = svgTagMapping;\n    const xmlns = \"http://www.w3.org/2000/svg\";\n    return document.createElementNS(xmlns, filteredTag);\n  } else {\n    if (options.tagPrefix) {\n      if (!tag.toLowerCase().startsWith(options.tagPrefix.toLowerCase())) {\n        filteredTag = options.replacementTagPrefix\n          ? options.replacementTagPrefix + tag\n          : `x-${tag}`;\n      }\n    }\n    return document.createElement(filteredTag);\n  }\n}\n\n/**\n * Sets attributes on an element with proper SVG attribute name mapping\n */\nexport function setElementAttribute(element: Element, key: string, value: string): void {\n  if (DOMSanitizer.shouldAcceptAttribute(key)) {\n    const remappedKey = remapAttributeName(key);\n    element.setAttribute(remappedKey, value);\n  }\n}\n\n/**\n * Gets the target element for children operations, handling portal elements\n */\nexport function getChildrenTarget(parent: Element): Element {\n  let targetForChildren = parent;\n  if ((parent as any).getPortalElement) {\n    targetForChildren = (parent as any).getPortalElement();\n  }\n  return targetForChildren;\n}\n\n/**\n * Gets the target element for removal operations, handling portal elements\n */\nexport function getRemovalTarget(parent: Element): Element {\n  let targetForRemoval = parent;\n  if ((parent as any).getPortalElement) {\n    targetForRemoval = (parent as any).getPortalElement();\n  }\n  return targetForRemoval;\n}\n", "import {\n  NetworkedDOMV01AttributeChangedDiff,\n  NetworkedDOMV01ChildrenChangedDiff,\n  NetworkedDOMV01ClientMessage,\n  NetworkedDOMV01NodeDescription,\n  NetworkedDOMV01RemoteEvent,\n  NetworkedDOMV01ServerMessage,\n  NetworkedDOMV01SnapshotMessage,\n  NetworkedDOMV01TextChangedDiff,\n} from \"@mml-io/networked-dom-protocol\";\n\nimport {\n  createElementWithSVGSupport,\n  getChildrenTarget,\n  getRemovalTarget,\n  setElementAttribute,\n} from \"./ElementUtils\";\nimport {\n  isHTMLElement,\n  isText,\n  NetworkedDOMWebsocketAdapter,\n  NetworkedDOMWebsocketOptions,\n} from \"./NetworkedDOMWebsocket\";\n\nexport class NetworkedDOMWebsocketV01Adapter implements NetworkedDOMWebsocketAdapter {\n  private idToElement = new Map<number, Node>();\n  private elementToId = new Map<Node, number>();\n  private currentRoot: HTMLElement | null = null;\n\n  constructor(\n    private websocket: WebSocket,\n    private parentElement: HTMLElement,\n    private connectedCallback: () => void,\n    private timeCallback?: (time: number) => void,\n    private options: NetworkedDOMWebsocketOptions = {},\n  ) {\n    this.websocket.binaryType = \"arraybuffer\";\n  }\n\n  public handleEvent(element: HTMLElement, event: CustomEvent<{ element: HTMLElement }>) {\n    const nodeId = this.elementToId.get(element);\n    if (nodeId === undefined || nodeId === null) {\n      throw new Error(\"Element not found\");\n    }\n\n    const detailWithoutElement: Partial<typeof event.detail> = {\n      ...event.detail,\n    };\n    delete detailWithoutElement.element;\n\n    const remoteEvent: NetworkedDOMV01RemoteEvent = {\n      type: \"event\",\n      nodeId,\n      name: event.type,\n      bubbles: event.bubbles,\n      params: detailWithoutElement,\n    };\n\n    this.send(remoteEvent);\n  }\n\n  private send(fromClientMessage: NetworkedDOMV01ClientMessage) {\n    this.websocket.send(JSON.stringify(fromClientMessage));\n  }\n\n  public clearContents(): boolean {\n    this.idToElement.clear();\n    this.elementToId.clear();\n    if (this.currentRoot) {\n      this.currentRoot.remove();\n      this.currentRoot = null;\n      return true;\n    }\n    return false;\n  }\n\n  receiveMessage(event: MessageEvent) {\n    try {\n      const messages = JSON.parse(event.data) as Array<NetworkedDOMV01ServerMessage>;\n      for (const message of messages) {\n        switch (message.type) {\n          case \"error\":\n            console.error(\"Error from server\", message);\n            break;\n          case \"warning\":\n            console.warn(\"Warning from server\", message);\n            break;\n          default: {\n            if (message.documentTime) {\n              if (this.timeCallback) {\n                this.timeCallback(message.documentTime);\n              }\n            }\n            switch (message.type) {\n              case \"snapshot\":\n                this.handleSnapshot(message);\n                this.connectedCallback();\n                break;\n              case \"attributeChange\":\n                this.handleAttributeChange(message);\n                break;\n              case \"childrenChanged\":\n                this.handleChildrenChanged(message);\n                break;\n              case \"textChanged\":\n                this.handleTextChanged(message);\n                break;\n              case \"ping\":\n                this.send({\n                  type: \"pong\",\n                  pong: message.ping,\n                });\n                break;\n              default:\n                console.warn(\"unknown message type\", message);\n                break;\n            }\n          }\n        }\n      }\n    } catch (e) {\n      console.error(\"Error handling websocket message\", e);\n      // Close the websocket to avoid processing any more messages in this invalid state (1011 = \"Internal Error\")\n      this.websocket.close(1011, \"Error handling websocket message\");\n      throw e;\n    }\n  }\n\n  private handleTextChanged(message: NetworkedDOMV01TextChangedDiff) {\n    const { nodeId, text } = message;\n\n    if (nodeId === undefined || nodeId === null) {\n      console.warn(\"No nodeId in textChanged message\");\n      return;\n    }\n    const node = this.idToElement.get(nodeId);\n    if (!node) {\n      throw new Error(\"No node found for textChanged message\");\n    }\n    if (!isText(node, this.parentElement)) {\n      throw new Error(\"Node for textChanged message is not a Text node\");\n    }\n    node.textContent = text;\n  }\n\n  private handleChildrenChanged(message: NetworkedDOMV01ChildrenChangedDiff) {\n    const { nodeId, addedNodes, removedNodes, previousNodeId } = message;\n    if (nodeId === undefined || nodeId === null) {\n      console.warn(\"No nodeId in childrenChanged message\");\n      return;\n    }\n    const parent = this.idToElement.get(nodeId);\n    if (!parent) {\n      throw new Error(\"No parent found for childrenChanged message\");\n    }\n    if (!isHTMLElement(parent, this.parentElement)) {\n      throw new Error(\"Parent is not an HTMLElement (that supports children)\");\n    }\n\n    const targetForChildren = getChildrenTarget(parent);\n\n    let nextElement = null;\n    let previousElement = null;\n    if (previousNodeId) {\n      previousElement = this.idToElement.get(previousNodeId);\n      if (!previousElement) {\n        throw new Error(\"No previous element found for childrenChanged message\");\n      }\n      nextElement = previousElement.nextSibling;\n    }\n\n    const elementsToAdd = [];\n    for (const addedNode of addedNodes) {\n      const childElement = this.handleNewElement(addedNode);\n      if (childElement) {\n        elementsToAdd.push(childElement);\n      }\n    }\n    if (elementsToAdd.length) {\n      if (previousElement) {\n        if (nextElement) {\n          // There is a previous and next element - insertBefore the next element\n          const docFrag = new DocumentFragment();\n          docFrag.append(...elementsToAdd);\n          targetForChildren.insertBefore(docFrag, nextElement);\n        } else {\n          // No next element - must be the last children\n          targetForChildren.append(...elementsToAdd);\n        }\n      } else {\n        // No previous element - must be the first children\n        targetForChildren.prepend(...elementsToAdd);\n      }\n    }\n    for (const removedNode of removedNodes) {\n      const childElement = this.idToElement.get(removedNode);\n      if (!childElement) {\n        throw new Error(`Child element not found: ${removedNode}`);\n      }\n      this.elementToId.delete(childElement);\n      this.idToElement.delete(removedNode);\n      const targetForRemoval = getRemovalTarget(parent);\n      targetForRemoval.removeChild(childElement);\n      if (isHTMLElement(childElement, this.parentElement)) {\n        // If child is capable of supporting children then remove any that exist\n        this.removeChildElementIds(childElement);\n      }\n    }\n  }\n\n  private removeChildElementIds(parent: HTMLElement) {\n    // If portal element, remove from portal element\n    const portal = getChildrenTarget(parent);\n    if (portal !== parent) {\n      this.removeChildElementIds(portal as HTMLElement);\n    }\n    for (let i = 0; i < parent.childNodes.length; i++) {\n      const child = parent.childNodes[i];\n      const childId = this.elementToId.get(child as HTMLElement);\n      if (!childId) {\n        console.error(\"Inner child of removed element had no id\", child);\n      } else {\n        this.elementToId.delete(child);\n        this.idToElement.delete(childId);\n      }\n      this.removeChildElementIds(child as HTMLElement);\n    }\n  }\n\n  private handleSnapshot(message: NetworkedDOMV01SnapshotMessage) {\n    // This websocket is successfully connected. Reset the backoff time.\n    if (this.currentRoot) {\n      this.currentRoot.remove();\n      this.currentRoot = null;\n      this.elementToId.clear();\n      this.idToElement.clear();\n    }\n\n    // create a tree of DOM elements\n    // NOTE: the MElement constructors are not executed during this stage\n    const element = this.handleNewElement(message.snapshot);\n    if (!element) {\n      throw new Error(\"Snapshot element not created\");\n    }\n    if (!isHTMLElement(element, this.parentElement)) {\n      throw new Error(\"Snapshot element is not an HTMLElement\");\n    }\n    this.currentRoot = element;\n    // appending to the tree causes MElements to be constructed\n    this.parentElement.append(element);\n  }\n\n  private handleAttributeChange(message: NetworkedDOMV01AttributeChangedDiff) {\n    const { nodeId, attribute, newValue } = message;\n    if (nodeId === undefined || nodeId === null) {\n      console.warn(\"No nodeId in attributeChange message\");\n      return;\n    }\n    const element = this.idToElement.get(nodeId);\n    if (element) {\n      if (isHTMLElement(element, this.parentElement)) {\n        if (newValue === null) {\n          element.removeAttribute(attribute);\n        } else {\n          setElementAttribute(element, attribute, newValue);\n        }\n      } else {\n        console.error(\"Element is not an HTMLElement and cannot support attributes\", element);\n      }\n    } else {\n      console.error(\"No element found for attributeChange message\");\n    }\n  }\n\n  private handleNewElement(message: NetworkedDOMV01NodeDescription): Node | null {\n    if (message.type === \"text\") {\n      const { nodeId, text } = message;\n      const textNode = document.createTextNode(\"\");\n      textNode.textContent = text;\n      this.idToElement.set(nodeId, textNode);\n      this.elementToId.set(textNode, nodeId);\n      return textNode;\n    }\n    const { tag, nodeId, attributes, children, text } = message;\n    if (nodeId === undefined || nodeId === null) {\n      console.warn(\"No nodeId in handleNewElement message\", message);\n      return null;\n    }\n    if (this.idToElement.has(nodeId)) {\n      console.error(\n        \"Received nodeId to add that is already present\",\n        nodeId,\n        this.idToElement.get(nodeId),\n      );\n    }\n    if (tag === \"#text\") {\n      const textNode = document.createTextNode(\"\");\n      textNode.textContent = text || null;\n      this.idToElement.set(nodeId, textNode);\n      this.elementToId.set(textNode, nodeId);\n      return textNode;\n    }\n\n    let element;\n    try {\n      element = createElementWithSVGSupport(tag, this.options);\n    } catch (e) {\n      console.error(`Error creating element: (${tag})`, e);\n      element = document.createElement(\"x-div\");\n    }\n    this.idToElement.set(nodeId, element);\n    this.elementToId.set(element, nodeId);\n    for (const key in attributes) {\n      const value = attributes[key];\n      setElementAttribute(element, key, value);\n    }\n    if (children) {\n      for (const child of children) {\n        const childElement = this.handleNewElement(child);\n        if (childElement) {\n          element.append(childElement);\n        }\n      }\n    }\n    return element;\n  }\n}\n", "import {\n  BufferReader,\n  BufferWriter,\n  decodeServerMessages,\n  encodeClientMessage,\n  getNetworkedDOMProtocolSubProtocol_v0_2SubversionOrThrow,\n  networkedDOMProtocolSubProtocol_v0_2_Subversion,\n  networkedDOMProtocolSubProtocol_v0_2_SubversionNumber,\n  NetworkedDOMV02AttributesChangedDiff,\n  NetworkedDOMV02ChangeHiddenFromDiff,\n  NetworkedDOMV02ChildrenAddedDiff,\n  NetworkedDOMV02ChildrenRemovedDiff,\n  NetworkedDOMV02ClientMessage,\n  NetworkedDOMV02DocumentTimeMessage,\n  NetworkedDOMV02NodeDescription,\n  NetworkedDOMV02PingMessage,\n  NetworkedDOMV02RemoteEvent,\n  NetworkedDOMV02ServerMessage,\n  NetworkedDOMV02SnapshotMessage,\n  NetworkedDOMV02TextChangedDiff,\n} from \"@mml-io/networked-dom-protocol\";\n\nimport {\n  createElementWithSVGSupport,\n  getChildrenTarget,\n  getRemovalTarget,\n  setElementAttribute,\n} from \"./ElementUtils\";\nimport {\n  isHTMLElement,\n  isText,\n  NetworkedDOMWebsocketAdapter,\n  NetworkedDOMWebsocketOptions,\n} from \"./NetworkedDOMWebsocket\";\n\n// This client uses a single connection id\nconst connectionId = 1;\n\n// If an element should not be visible to this client, it will be replaced with this tag and attributes will be stored ready to be applied if it is unhidden.\nconst hiddenTag = \"x-hidden\";\n\nexport class NetworkedDOMWebsocketV02Adapter implements NetworkedDOMWebsocketAdapter {\n  private idToElement = new Map<number, Node>();\n  private elementToId = new Map<Node, number>();\n  private placeholderToId = new Map<Node, number>();\n  private hiddenPlaceholderElements = new Map<\n    number,\n    {\n      placeholder: Node;\n      element: Node;\n    }\n  >();\n  private currentRoot: HTMLElement | null = null;\n  private batchMode = false;\n  private batchMessages: Array<NetworkedDOMV02ServerMessage> = [];\n  private readonly protocolSubversion: networkedDOMProtocolSubProtocol_v0_2_SubversionNumber;\n\n  constructor(\n    private websocket: WebSocket,\n    private parentElement: HTMLElement,\n    private connectedCallback: () => void,\n    private timeCallback?: (time: number) => void,\n    private options: NetworkedDOMWebsocketOptions = {},\n  ) {\n    this.websocket.binaryType = \"arraybuffer\";\n    this.protocolSubversion = getNetworkedDOMProtocolSubProtocol_v0_2SubversionOrThrow(\n      websocket.protocol as networkedDOMProtocolSubProtocol_v0_2_Subversion,\n    );\n    this.send({\n      type: \"connectUsers\",\n      connectionIds: [connectionId],\n      connectionTokens: [this.options.connectionToken ?? null],\n    });\n  }\n\n  public handleEvent(element: HTMLElement, event: CustomEvent<{ element: HTMLElement }>) {\n    const nodeId = this.elementToId.get(element);\n    if (nodeId === undefined || nodeId === null) {\n      console.error(\"Element not found for event\", { nodeId, element, event });\n      return;\n    }\n\n    const detailWithoutElement: Partial<typeof event.detail> = {\n      ...event.detail,\n    };\n    delete detailWithoutElement.element;\n\n    const remoteEvent: NetworkedDOMV02RemoteEvent = {\n      type: \"event\",\n      nodeId,\n      connectionId,\n      name: event.type,\n      bubbles: event.bubbles,\n      params: detailWithoutElement,\n    };\n\n    this.send(remoteEvent);\n  }\n\n  private send(message: NetworkedDOMV02ClientMessage) {\n    const writer = new BufferWriter(256);\n    encodeClientMessage(message, writer, this.protocolSubversion);\n    this.websocket.send(writer.getBuffer());\n  }\n\n  public clearContents(): boolean {\n    this.idToElement.clear();\n    this.elementToId.clear();\n    if (this.currentRoot) {\n      this.currentRoot.remove();\n      this.currentRoot = null;\n      return true;\n    }\n    return false;\n  }\n\n  public receiveMessage(event: MessageEvent) {\n    try {\n      const reader = new BufferReader(new Uint8Array(event.data));\n      const messages = decodeServerMessages(reader);\n      for (const message of messages) {\n        if (message.type === \"batchStart\") {\n          // Need to wait for batchEnd before applying messages\n          this.batchMode = true;\n        } else if (message.type === \"batchEnd\") {\n          // Apply all messages\n          this.batchMode = false;\n          for (const batchedMessage of this.batchMessages) {\n            this.applyMessage(batchedMessage);\n          }\n          this.batchMessages = [];\n        } else {\n          if (this.batchMode) {\n            this.batchMessages.push(message);\n          } else {\n            this.applyMessage(message);\n          }\n        }\n      }\n    } catch (e) {\n      console.error(\"Error handling websocket message\", e);\n      // Close the websocket to avoid processing any more messages in this invalid state (1011 = \"Internal Error\")\n      this.websocket.close(1011, \"Error handling websocket message\");\n      throw e;\n    }\n  }\n\n  private applyMessage(message: NetworkedDOMV02ServerMessage) {\n    switch (message.type) {\n      case \"error\":\n        console.error(\"Error from server\", message);\n        break;\n      case \"warning\":\n        console.warn(\"Warning from server\", message);\n        break;\n      case \"snapshot\":\n        this.handleSnapshot(message);\n        this.connectedCallback();\n        break;\n      case \"attributesChanged\":\n        this.handleAttributeChange(message);\n        break;\n      case \"documentTime\":\n        this.handleDocumentTime(message);\n        break;\n      case \"childrenAdded\":\n        this.handleChildrenAdded(message);\n        break;\n      case \"changeHiddenFrom\":\n        this.handleChangeHiddenFrom(message);\n        break;\n      case \"changeVisibleTo\":\n        // no-op for end user clients\n        break;\n      case \"childrenRemoved\":\n        this.handleChildrenRemoved(message);\n        break;\n      case \"textChanged\":\n        this.handleTextChanged(message);\n        break;\n      case \"ping\":\n        this.handlePing(message);\n        break;\n      default:\n        console.warn(\"unknown message type\", message);\n        break;\n    }\n  }\n\n  private handleTextChanged(message: NetworkedDOMV02TextChangedDiff) {\n    const { nodeId, text } = message;\n\n    if (nodeId === undefined || nodeId === null) {\n      console.warn(\"No nodeId in textChanged message\");\n      return;\n    }\n    const node = this.idToElement.get(nodeId);\n    if (!node) {\n      throw new Error(\"No node found for textChanged message\");\n    }\n    if (!isText(node, this.parentElement)) {\n      throw new Error(\"Node for textChanged message is not a Text node\");\n    }\n    node.textContent = text;\n  }\n\n  private handleChangeHiddenFrom(message: NetworkedDOMV02ChangeHiddenFromDiff) {\n    const { nodeId, addHiddenFrom, removeHiddenFrom } = message;\n    const node = this.idToElement.get(nodeId);\n    const hiddenElement = this.hiddenPlaceholderElements.get(nodeId);\n    if (addHiddenFrom.length > 0 && addHiddenFrom.indexOf(connectionId) !== -1) {\n      // This element is being hidden\n      if (hiddenElement) {\n        // This element is already hidden\n        return;\n      }\n      if (!node) {\n        throw new Error(\"No node found for changeHiddenFrom message\");\n      }\n      const parent = node.parentElement;\n      if (!parent) {\n        throw new Error(\"Node has no parent\");\n      }\n      const placeholder = document.createElement(hiddenTag);\n      parent.replaceChild(placeholder, node);\n      this.hiddenPlaceholderElements.set(nodeId, { placeholder, element: node });\n      this.placeholderToId.set(placeholder, nodeId);\n    } else if (removeHiddenFrom.length > 0 && removeHiddenFrom.indexOf(connectionId) !== -1) {\n      // This element is being unhidden\n      if (!hiddenElement) {\n        // This element is not hidden\n        return;\n      }\n      const { placeholder, element } = hiddenElement;\n      const parent = placeholder.parentElement;\n      if (!parent) {\n        throw new Error(\"Placeholder has no parent\");\n      }\n      parent.replaceChild(element, placeholder);\n      this.hiddenPlaceholderElements.delete(nodeId);\n      this.placeholderToId.delete(placeholder);\n    }\n  }\n\n  private handleChildrenAdded(message: NetworkedDOMV02ChildrenAddedDiff) {\n    const { nodeId, addedNodes, previousNodeId } = message;\n    if (nodeId === undefined || nodeId === null) {\n      console.warn(\"No nodeId in childrenChanged message\");\n      return;\n    }\n    let parent = this.idToElement.get(nodeId);\n    if (!parent) {\n      throw new Error(\"No parent found for childrenChanged message\");\n    }\n\n    const hiddenParent = this.hiddenPlaceholderElements.get(nodeId);\n    if (hiddenParent) {\n      // This element is hidden - add the children to the hidden element (not the placeholder)\n      parent = hiddenParent.element;\n    }\n    if (!isHTMLElement(parent, this.parentElement)) {\n      throw new Error(\"Parent is not an HTMLElement (that supports children)\");\n    }\n\n    const targetForChildren = getChildrenTarget(parent);\n\n    let nextElement = null;\n    let previousElement = null;\n    if (previousNodeId) {\n      previousElement = this.idToElement.get(previousNodeId);\n      if (!previousElement) {\n        throw new Error(\"No previous element found for childrenChanged message\");\n      }\n      nextElement = previousElement.nextSibling;\n    }\n\n    const elementsToAdd = [];\n    for (const addedNode of addedNodes) {\n      const childElement = this.handleNewElement(addedNode);\n      if (childElement) {\n        elementsToAdd.push(childElement);\n      }\n    }\n    if (elementsToAdd.length) {\n      if (previousElement) {\n        if (nextElement) {\n          // There is a previous and next element - insertBefore the next element\n          const docFrag = new DocumentFragment();\n          docFrag.append(...elementsToAdd);\n          targetForChildren.insertBefore(docFrag, nextElement);\n        } else {\n          // No next element - must be the last children\n          targetForChildren.append(...elementsToAdd);\n        }\n      } else {\n        // No previous element - must be the first children\n        targetForChildren.prepend(...elementsToAdd);\n      }\n    }\n  }\n\n  private handleChildrenRemoved(message: NetworkedDOMV02ChildrenRemovedDiff) {\n    const { nodeId, removedNodes } = message;\n    if (nodeId === undefined || nodeId === null) {\n      console.warn(\"No nodeId in childrenChanged message\");\n      return;\n    }\n    const parent = this.idToElement.get(nodeId);\n    if (!parent) {\n      throw new Error(\"No parent found for childrenChanged message\");\n    }\n    if (!isHTMLElement(parent, this.parentElement)) {\n      throw new Error(\"Parent is not an HTMLElement (that supports children)\");\n    }\n\n    for (const removedNode of removedNodes) {\n      const childElement = this.idToElement.get(removedNode);\n      if (!childElement) {\n        throw new Error(`Child element not found: ${removedNode}`);\n      }\n      this.elementToId.delete(childElement);\n      this.idToElement.delete(removedNode);\n\n      const targetForRemoval = getRemovalTarget(parent);\n\n      const hiddenElement = this.hiddenPlaceholderElements.get(removedNode);\n      if (hiddenElement) {\n        // This element was hidden so we remove the placeholder from the parent\n        const placeholder = hiddenElement.placeholder;\n        try {\n          targetForRemoval.removeChild(placeholder);\n        } catch (e) {\n          console.error(\"error removing placeholder child\", e);\n        }\n        this.hiddenPlaceholderElements.delete(removedNode);\n        this.placeholderToId.delete(placeholder);\n        if (isHTMLElement(childElement, this.parentElement)) {\n          // If child is capable of supporting children then remove any that exist\n          this.removeChildElementIds(childElement);\n        }\n      } else {\n        try {\n          targetForRemoval.removeChild(childElement);\n        } catch (e) {\n          console.error(\"error removing child\", e);\n        }\n        if (isHTMLElement(childElement, this.parentElement)) {\n          // If child is capable of supporting children then remove any that exist\n          this.removeChildElementIds(childElement);\n        }\n      }\n    }\n  }\n\n  private removeChildElementIds(parent: HTMLElement) {\n    // If portal element, remove from portal element\n    const portal = getChildrenTarget(parent);\n    if (portal !== parent) {\n      this.removeChildElementIds(portal as HTMLElement);\n    }\n    const childNodes = parent.childNodes;\n    for (let i = 0; i < childNodes.length; i++) {\n      const child = childNodes[i];\n      const childId = this.elementToId.get(child as HTMLElement);\n      if (!childId) {\n        const placeholderId = this.placeholderToId.get(child);\n        if (placeholderId) {\n          const childElement = this.idToElement.get(placeholderId);\n          if (childElement) {\n            this.elementToId.delete(childElement);\n          } else {\n            console.error(\n              \"Inner child of removed placeholder element not found by id\",\n              placeholderId,\n            );\n          }\n          this.idToElement.delete(placeholderId);\n          this.placeholderToId.delete(child);\n          this.hiddenPlaceholderElements.delete(placeholderId);\n          this.removeChildElementIds(childElement as HTMLElement);\n        } else {\n          console.error(\n            \"Inner child of removed element had no id\",\n            (child as HTMLElement).outerHTML,\n          );\n        }\n      } else {\n        this.elementToId.delete(child);\n        this.idToElement.delete(childId);\n        this.removeChildElementIds(child as HTMLElement);\n      }\n    }\n  }\n\n  private handleSnapshot(message: NetworkedDOMV02SnapshotMessage) {\n    // This websocket is successfully connected. Reset the backoff time.\n    if (this.currentRoot) {\n      this.currentRoot.remove();\n      this.currentRoot = null;\n      this.elementToId.clear();\n      this.idToElement.clear();\n    }\n\n    this.timeCallback?.(message.documentTime);\n\n    // create a tree of DOM elements\n    // NOTE: the MElement constructors are not executed during this stage\n    const element = this.handleNewElement(message.snapshot);\n    if (!element) {\n      throw new Error(\"Snapshot element not created\");\n    }\n    if (!isHTMLElement(element, this.parentElement)) {\n      throw new Error(\"Snapshot element is not an HTMLElement\");\n    }\n    this.currentRoot = element;\n    // appending to the tree causes MElements to be constructed\n    this.parentElement.append(element);\n  }\n\n  private handleDocumentTime(message: NetworkedDOMV02DocumentTimeMessage) {\n    this.timeCallback?.(message.documentTime);\n  }\n\n  private handleAttributeChange(message: NetworkedDOMV02AttributesChangedDiff) {\n    const { nodeId, attributes } = message;\n    if (nodeId === undefined || nodeId === null) {\n      console.warn(\"No nodeId in attributeChange message\");\n      return;\n    }\n    let element = this.idToElement.get(nodeId);\n    const hiddenElement = this.hiddenPlaceholderElements.get(nodeId);\n    if (hiddenElement) {\n      // This element is hidden - apply the attributes to the hidden element\n      element = hiddenElement.element;\n    }\n    if (element) {\n      if (isHTMLElement(element, this.parentElement)) {\n        for (const [key, newValue] of attributes) {\n          if (newValue === null) {\n            element.removeAttribute(key);\n          } else {\n            setElementAttribute(element, key, newValue);\n          }\n        }\n      } else {\n        console.error(\"Element is not an HTMLElement and cannot support attributes\", element);\n      }\n    } else {\n      console.error(\"No element found for attributeChange message\");\n    }\n  }\n\n  private handleNewElement(message: NetworkedDOMV02NodeDescription): Node | null {\n    if (message.type === \"text\") {\n      const { nodeId, text } = message;\n      const textNode = document.createTextNode(\"\");\n      textNode.textContent = text;\n      this.idToElement.set(nodeId, textNode);\n      this.elementToId.set(textNode, nodeId);\n      return textNode;\n    }\n    const { tag, nodeId, attributes, children, text, hiddenFrom } = message;\n    if (this.idToElement.has(nodeId)) {\n      console.error(\n        \"Received nodeId to add that is already present\",\n        nodeId,\n        this.idToElement.get(nodeId),\n      );\n      throw new Error(\"Received nodeId to add that is already present: \" + nodeId);\n    }\n\n    if (tag === \"#text\") {\n      const textNode = document.createTextNode(\"\");\n      textNode.textContent = text || null;\n      this.idToElement.set(nodeId, textNode);\n      this.elementToId.set(textNode, nodeId);\n      return textNode;\n    }\n\n    let element: Element;\n    try {\n      element = createElementWithSVGSupport(tag, this.options);\n    } catch (e) {\n      console.error(`Error creating element: (${tag})`, e);\n      element = document.createElement(\"x-div\");\n    }\n    for (const [key, value] of attributes) {\n      if (value !== null) {\n        setElementAttribute(element, key, value);\n      }\n    }\n    if (children) {\n      for (const child of children) {\n        const childElement = this.handleNewElement(child);\n        if (childElement) {\n          element.append(childElement);\n        }\n      }\n    }\n\n    if (hiddenFrom && hiddenFrom.length > 0 && hiddenFrom.indexOf(connectionId) !== -1) {\n      // This element is hidden - create a placeholder that will be in the DOM to maintain structure, but keep the underlying element hidden\n      const placeholder = document.createElement(hiddenTag);\n      this.hiddenPlaceholderElements.set(nodeId, { placeholder, element });\n      this.placeholderToId.set(placeholder, nodeId);\n\n      // The actual element is not added to the DOM, but it is stored for when it is unhidden (and should be the target for attribute changes, children additions, etc.)\n      this.idToElement.set(nodeId, element);\n      this.elementToId.set(element, nodeId);\n\n      return placeholder;\n    } else {\n      this.idToElement.set(nodeId, element);\n      this.elementToId.set(element, nodeId);\n      return element;\n    }\n  }\n\n  private handlePing(message: NetworkedDOMV02PingMessage) {\n    this.timeCallback?.(message.documentTime);\n    this.send({\n      type: \"pong\",\n      pong: message.ping,\n    });\n  }\n}\n"],
  "mappings": "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",
  "names": ["c", "nodeId", "text", "nodeId", "text", "NetworkedDOMWebsocketStatus"]
}
