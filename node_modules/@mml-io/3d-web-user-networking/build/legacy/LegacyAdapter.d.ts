import { DeltaNetServer } from "@mml-io/delta-net-server";
import { UserNetworkingLogger } from "../UserNetworkingLogger";
import { UserNetworkingServer } from "../UserNetworkingServer";
import { LegacyUserNetworkingClientUpdate } from "./LegacyUserNetworkingCodec";
import { LegacyUserData, LegacyUserNetworkingServerError } from "./LegacyUserNetworkingMessages";
export type LegacyUserNetworkingServerClient = {
    socket: WebSocket;
    id: number;
    lastPong: number;
    update: LegacyUserNetworkingClientUpdate;
    authenticatedUser: LegacyUserData | null;
};
export declare class LegacyAdapter {
    private readonly userNetworkingServer;
    private readonly deltaNetServer;
    private logger;
    private allClientsById;
    private legacyAuthenticatedClientsById;
    constructor(userNetworkingServer: UserNetworkingServer, deltaNetServer: DeltaNetServer, logger: UserNetworkingLogger);
    broadcastMessage(broadcastType: number, broadcastPayload: string): void;
    addWebSocket(socket: WebSocket): void;
    private handleDisconnectedClient;
    private handleUserAuth;
    updateUserCharacter(clientId: number, userData: LegacyUserData): void;
    private internalUpdateUser;
    private handleUserUpdate;
    sendUpdates(removedIds: Set<number>, addedIds: Set<number>, updateUserProfilesInTick: Set<number>): void;
    dispose(clientCloseError?: LegacyUserNetworkingServerError): void;
}
//# sourceMappingURL=LegacyAdapter.d.ts.map