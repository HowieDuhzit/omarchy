import { ObservableDOMRemoteEvent } from "@mml-io/observable-dom-common";
import { DOMWindow } from "jsdom";
import { DOMRunnerFactory, DOMRunnerInterface, DOMRunnerMessage } from "./ObservableDOM";
export declare const JSDOMRunnerFactory: DOMRunnerFactory;
export type ResourceURL = string | RegExp;
export type JSDOMRunnerOptions = {
    allowResourceLoading?: boolean | ResourceURL[];
    globals?: Record<string, any>;
};
/**
 * The JSDOMRunner class is used to run HTML Documents using JSDOM and emit DOMRunnerMessages for document events such
 * as mutations.
 *
 * It handles the receiving of remote events and the dispatching of them to the underlying DOM elements.
 */
export declare class JSDOMRunner implements DOMRunnerInterface {
    domWindow: DOMWindow | null;
    private jsdom;
    private callback;
    private mutationObserver;
    private htmlPath;
    private documentStartTime;
    private isLoaded;
    private logBuffer;
    constructor(htmlPath: string, htmlContents: string, params: object, callback: (domRunnerMessage: DOMRunnerMessage) => void, { allowResourceLoading, globals }?: JSDOMRunnerOptions);
    private flushLogBuffer;
    private log;
    getDocument(): Document;
    getWindow(): any;
    dispose(): void;
    getDocumentTime(): number;
    dispatchRemoteEventFromConnectionId(connectionId: number, domNode: Element, remoteEvent: ObservableDOMRemoteEvent): void;
    private createVirtualConsole;
}
//# sourceMappingURL=JSDOMRunner.d.ts.map