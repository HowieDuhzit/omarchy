import { UserData, UserNetworkingServer, UserNetworkingServerError } from "@mml-io/3d-web-user-networking";
import express from "express";
import enableWs from "express-ws";
import { MMLDocumentsServer } from "./MMLDocumentsServer";
type UserAuthenticator = {
    generateAuthorizedSessionToken(req: express.Request): Promise<string | null>;
    getClientIdForSessionToken: (sessionToken: string) => {
        id: number;
    } | null;
    onClientConnect(clientId: number, sessionToken: string, userIdentityPresentedOnConnection?: UserData): Promise<UserData | true | Error> | UserData | true | Error;
    onClientUserIdentityUpdate(clientId: number, userIdentity: UserData): UserData | true | Error;
    onClientDisconnect(clientId: number): void;
};
export declare const defaultSessionTokenPlaceholder = "SESSION.TOKEN.PLACEHOLDER";
export type Networked3dWebExperienceServerConfig = {
    networkPath: string;
    webClientServing: {
        indexUrl: string;
        indexContent: string;
        sessionTokenPlaceholder?: string;
        clientBuildDir: string;
        clientUrl: string;
        clientWatchWebsocketPath?: string;
    };
    enableChat?: boolean;
    assetServing?: {
        assetsDir: string;
        assetsUrl: string;
    };
    mmlServing?: {
        documentsWatchPath: string;
        documentsDirectoryRoot: string;
        documentsUrl: string;
    };
    userAuthenticator: UserAuthenticator;
};
export declare class Networked3dWebExperienceServer {
    private config;
    userNetworkingServer: UserNetworkingServer;
    mmlDocumentsServer?: MMLDocumentsServer;
    constructor(config: Networked3dWebExperienceServerConfig);
    updateUserCharacter(clientId: number, userData: UserData): void;
    dispose(error?: UserNetworkingServerError): void;
    registerExpressRoutes(app: enableWs.Application): void;
}
export {};
//# sourceMappingURL=Networked3dWebExperienceServer.d.ts.map